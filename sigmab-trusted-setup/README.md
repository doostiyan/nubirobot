# راه‌اندازی امن سیگما-بی

## مدار ها


* مدار های `mpt_path` و `mpt_last`: ثابت می‌کنند که یک جفت آدرس/موجودی رمزنگاری شده داخل state-root اتریوم موجود هستند.
* مدار `ecdsa_verify`: ثابت می‌کند که امضایی توسط یک آدرس رمزی‌شده وجود دارد که پیام معینی را امضا کرده است.
* مدار `pol`: ثابت می‌کند که یک حساب کاربری با شناسه و موجودی معین در یک درخت بدهی منظور شده است و اینکه موجودی ریشه درخت از یک عدد معین (اندوخته) کمتر است.
* مدار `stealth_balance_addition`: ثابت می‌کند که جمع دو عدد رمزی‌شده برابر عدد رمزی‌شده سوم است.



## پیشنیاز ها

برای شرکت در این راه‌اندازی، لازم است نرم‌افزار `snarkjs` را نصب داشته باشید. این نرم‌افزار برای اجرا به NodeJS نیاز خواهد داشت، بنابراین لازم است که پکیج `npm` را توسط پکیج منیجر سیستم خود نصب نمایید.

```
sudo apt install npm
npm i g snarkjs
```

### اختیاری

در طی مراحل مشارکت باید مقداری تصادفی را به عنوان آنتروپی وارد کنید. اگر مایل بودید از ورودی دوربین هم به عنوان منبع آنتروپی استفاده کنید، لازم است بسته ‍`opencv-python` را هم برای پایتون نصب نمایید.

```
pip install opencv-python
```

## نحوه مشارکت

* ابتدا این مخزن را کلون کنید:

```bash
git clone https://github.com/nobitex/sigmab-trusted-setup
```

* یک فولدر `params` داخل فولدر مخزن ایجاد کرده و فایل های `zkey` دریافت شده از هماهنگ‌کننده را داخل آن کپی کنید.

```bash
cd sigmab-trusted-setup
mkdir params
cp -r [PATH_TO_ZKEY_FILES]/*.zkey params/
```

* دستور `make contribute` را اجرا کنید. این دستور از شما یوزرنیم گیتهاب دریافت خواهد کرد. مطمئن شوید که یوزرنیم درستی را وارد می‌کنید. لاگ های این دستور داخل فایل `logs.txt` ذخیره خواهند شد. از آن برای نوشتن گزارش خود استفاده کنید.
* داخل فولدر خود یک فایل به اسم `report.md` ایجاد کنید و گزارش خود را بنویسید. می‌توانید از قالب `TEMPLATE.md` استفاده کنید.
* با استفاده از نرم‌افزار `gpg`، گزارش خود را امضا کنید. لازم است که از کلیدعمومی که به گیتهاب شما وصل است استفاده کنید.

```bash
gpg --detach-sign report.md
```

* یک Pull Request بسازید و تغییرات خود را سابمیت کنید.

## نحوه مشارکت (ویندوز)

* پایتون را نصب کنید: https://www.python.org/ftp/python/3.12.4/python-3.12.4-amd64.exe
* نرم‌افزار NodeJS را نصب کنید: https://nodejs.org/dist/v20.15.1/node-v20.15.1-x64.msi
* نرم‌افزار `gpg4win` را نصب کنید: https://gpg4win.org/get-gpg4win.html
* ترمینال را باز کنید و با استفاده از `npm` نرم‌افزار `snarkjs` را نصب کنید: `npm i g snarkjs`
* یک فولدر `params` داخل فولدر مخزن ایجاد کرده و فایل های `zkey` دریافت شده از هماهنگ‌کننده را داخل آن کپی کنید.
* بر روی `main.py` کلیک کنید تا مشارکت آغاز شود. این دستور از شما یوزرنیم گیتهاب دریافت خواهد کرد. مطمئن شوید که یوزرنیم درستی را وارد می‌کنید. لاگ های این دستور داخل فایل `logs.txt` ذخیره خواهند شد. از آن برای نوشتن گزارش خود استفاده کنید.
* داخل فولدر خود یک فایل به اسم `report.md` ایجاد کنید و گزارش خود را بنویسید. می‌توانید از قالب `TEMPLATE.md` استفاده کنید.
* با استفاده از نرم‌افزار `gpg`، گزارش خود را امضا کنید. لازم است که از کلیدعمومی که به گیتهاب شما وصل است استفاده کنید.

```bash
gpg --detach-sign report.md
```

* یک Pull Request بسازید و تغییرات خود را سابمیت کنید.